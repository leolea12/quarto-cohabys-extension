% Template issu des travaux d'E. Quinton (cohabys)

\usepackage{scrextend}

\RequirePackage{lastpage,graphicx,tikz,setspace}
\usetikzlibrary{positioning}


% Based on Boadilla Style
% definition des couleurs cohabys

\definecolor{cohabys}{RGB}{0,147,146}        % turquoise principal
\definecolor{cohabysclair}{RGB}{160,220,218}     % turquoise clair
\definecolor{cohabysmedium}{RGB}{33,97,140}      % bleu moyen
\definecolor{cohabysfonce}{RGB}{38,76,82}         % turquoise foncé
\definecolor{vert}{RGB}{157,197,68}      % vert 
\definecolor{bleuclair}{RGB}{173,215,233} % bleu clair
\definecolor{bleufonce}{RGB}{66,48,137}   % bleu foncé 
\definecolor{gris}{RGB}{121,120,112}      % gris 
\definecolor{argent}{RGB}{196,192,179}    % argent 
\definecolor{rouge}{RGB}{142,2,0}           % rouge 

% disallow navigation menu
\setbeamertemplate{navigation symbols}{}

% Colors for title, subttitle, author, date...
\setbeamercolor{title}{fg=cohabys}
\setbeamercolor{subtitle}{fg=cohabysfonce}
\setbeamercolor{author}{fg=cohabys}
\setbeamercolor{date}{fg=cohabys}
\setbeamercolor{beamercolorbox}{bg=white}
\setbeamercolor{section in toc}{bg=white,fg=cohabys}
\setbeamercolor{subsection in toc}{bg=white,fg=cohabysfonce}
\setbeamercolor{section number projected}{bg=white,fg=bleufonce}
\setbeamercolor{subsection number projected}{bg=white,fg=bleuclair}
\setbeamercolor{frametitle}{fg=cohabys}
\setbeamercolor{framesubtitle}{fg=cohabysfonce}
\setbeamercolor{item}{fg=cohabys,bg=white}
\setbeamercolor{subitem}{fg=cohabys,bg=white}
 

\useinnertheme[shadow]{rounded}
\useoutertheme{default}


\setbeamercolor{block title}{fg=white,bg=cohabysfonce}
\setbeamercolor{block title alerted}{fg=white, bg=rouge}
\setbeamercolor{block title example}{fg=black, bg=vert}
\setbeamercolor{block body}{parent=normal text,use=block title,bg=block title.bg!20!bg}
\setbeamercolor{block body alerted}{parent=normal text,use=block title alerted,bg=block title alerted.bg!20!bg}
\setbeamercolor{block body example}{parent=normal text,use=block title example,bg=block title example.bg!20!bg}

\setbeamercolor*{palette primary}{fg=white,bg=cohabysmedium}
\setbeamercolor*{palette secondary}{fg=white,bg=cohabys}
\setbeamercolor*{palette tertiary}{fg=white,bg=cohabysclair}
\setbeamercolor*{palette quaternary}{fg=black,bg=white}
  
\setbeamercolor*{palette sidebar primary}{fg=white,bg=cohabysfonce}
\setbeamercolor*{palette sidebar secondary}{fg=white,bg=cohabys}
\setbeamercolor*{palette sidebar tertiary}{fg=white,bg=cohabysclair}
\setbeamercolor*{palette sidebar quaternary}{fg=black,bg=white}

\setbeamercolor*{titlelike}{fg=cohabysfonce,bg=white}
\setbeamercolor*{subtitlelike}{fg=cohabys,bg=white}

\setbeamercolor*{separation line}{}
\setbeamercolor*{fine separation line}{}

\setbeamersize{text margin left=1em,text margin right=1em}

\useitemizeitemtemplate{%
    \tiny\raise1.5pt\hbox{\color{cohabys}$\blacktriangleright$}%
}

\usesubitemizeitemtemplate{%
    \tiny\raise1.5pt\hbox{\color{cohabys}$\blacktriangleright$}%
}
\usesubsubitemizeitemtemplate{%
    \tiny\raise1.5pt\hbox{\color{cohabys}$\bigstar$}%
}


% Title slide and Footer template from https://forgemia.inra.fr/gauthier.quesnel/beamer-cohabys/


\setbeamertemplate{title page}{
    % Top left logo
    \begin{tikzpicture}[remember picture,overlay]
        \node[anchor=north west, xshift=0.5cm, yshift=0cm] at (current page.north west){%
            \includegraphics[height=0.15\textheight]{_extensions/cohabys/Images/cohabys.png}};
    \end{tikzpicture}

    % Top right logo
    \begin{tikzpicture}[remember picture,overlay]
        \node[anchor=north east, xshift=-0.5cm, yshift=0cm] at (current page.north east){%
            \includegraphics[height=0.15\textheight]{_extensions/cohabys/Images/republique-francaise.png}};
    \end{tikzpicture}

    % Center bottom license logo
    \begin{tikzpicture}[remember picture,overlay]
        \node[anchor=south, yshift=0cm] at (current page.south){%
            \includegraphics[width=15cm]{_extensions/cohabys/Images/footer-cartouches.png}};
    \end{tikzpicture}

    % Center bottom license logo
    \begin{tikzpicture}[remember picture,overlay]
        \node[anchor=south, yshift=0.5cm] at (current page.south){%
            \includegraphics[width=2cm]{_extensions/cohabys/Images/open-licence.png}};
    \end{tikzpicture}



    % Title block
    \vspace*{-5cm}
    \begin{center}
        {\usebeamerfont{title}\usebeamercolor[fg]{title}%
        \color{cohabysmedium}$\blacktriangleright$\,\textbf{\inserttitle}\par}
        \vskip 1em
        {\usebeamerfont{subtitle}\insertsubtitle\par}
        \vskip 1.5em
        {\usebeamerfont{author}\insertauthor\par}
        \vskip 0.5em
        {\usebeamerfont{institute}\insertinstitute\par}
        \vskip 0.5em
        {\usebeamerfont{date}\insertdate\par}
    \end{center}
}

\setbeamertemplate{footline}{
    \begin{tikzpicture}[remember picture,overlay]
        \ifnum\thepage>1
        \node[xshift=+1.1cm,yshift=0.6cm] at (current page.south west){%
            \includegraphics[width=2cm]{_extensions/cohabys/Images/bas-gauche.png}};
        \node[xshift=+7.5cm,yshift=0.4cm] at (current page.south west){%
                \begin{beamercolorbox}[ht=3em,dp=1em,left]{}
                    \hspace{8em}\usebeamercolor[fg]{title}\insertshortauthor
                \end{beamercolorbox}};
        \node[xshift=+7.5cm,yshift=0.7cm] at (current page.south west){%
                \begin{beamercolorbox}[ht=3em,dp=1em,left]{}
                    \hspace{8em}\usebeamercolor[fg]{title}\insertshorttitle
                \end{beamercolorbox}};
\node[xshift=6.5cm,yshift=0.6cm] at (current page.south east){%
                \begin{beamercolorbox}[ht=3em,dp=1em,left]{}
                    p.~\thepage\hspace{0.2em}/\hspace{0.2em}\pageref{LastPage}
                \end{beamercolorbox}};
                
        \fi
    \end{tikzpicture}
}


\setbeamertemplate{frametitle}{
\vspace{+1em}
\color{cohabys}\textbf{\raise1pt\hbox{\color{cohabysmedium}$\blacktriangleright$}\hskip .3em \insertframetitle}}


\mode
<all>